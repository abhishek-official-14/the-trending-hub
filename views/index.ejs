<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Thetredinghub - Your Modern E-commerce Store</title>
  <meta name="description" content="Thetredinghub - Modern e-commerce store for fashion, electronics, and more. Best prices & fast delivery." />
  <meta name="keywords" content="Thetredinghub, online shopping, fashion, electronics, e-commerce, best prices" />
  <meta name="author" content="Thetredinghub" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../public/styles.css" />
  <!-- FontAwesome for icons -->
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>
<body>

<!-- Navbar -->


<!-- Hero Section -->
<section class="hero">
  <h1>Welcome to Thetredinghub</h1>
  <p>Explore our modern collection of fashion, electronics & more</p>
  <a href="/products" class="btn">Shop Now</a>
</section>

<!-- Featured Products Section -->
<section>
  <h2 style="text-align:center; margin-top:1.5em;">Featured Products</h2>
  <div class="product-grid" id="featured-products">
    <% if (items.length === 0) { %>
      <p>No products available currently.</p>
    <% } else { %>
      <% items.slice(0, 4).forEach(p => { %>
        <div class="product-card" data-category="<%= p.category %>">
          <a href="/product/<%= p._id %>">
            <img src="<%= (p.images && p.images[0]) || '/images/placeholder.png' %>" alt="<%= p.title %>" loading="lazy" />
            <h3><%= p.title %></h3>
          </a>
          <p>₹<%= p.price %></p>
          <button onclick="addToCart('<%= p._id %>')">Add to Cart</button>
          <button onclick="addToWishlist('<%= p._id %>')">♡ Wishlist</button>
        </div>
      <% }) %>
    <% } %>
  </div>
</section>

<script>
// Show logged in user in navbar (using localStorage)
const loggedUser = localStorage.getItem('loggedInUser');
if (loggedUser) {
  const nav = document.querySelector('nav');
  const welcomeSpan = document.createElement('span');
  welcomeSpan.style.color = 'white';
  welcomeSpan.style.marginLeft = '1em';
  welcomeSpan.textContent = `Welcome, ${loggedUser}`;
  nav.appendChild(welcomeSpan);
}

// Search function filter products shown on page
function searchProduct() {
  const query = document.getElementById('searchBox').value.toLowerCase();
  const products = document.querySelectorAll('.product-card');
  products.forEach(prod => {
    const name = prod.querySelector('h3').innerText.toLowerCase();
    prod.style.display = name.includes(query) ? 'block' : 'none';
  });
}

// Add to cart by product ID, update localStorage
function addToCart(productId) {
  let cart = JSON.parse(localStorage.getItem('cart') || '[]');
  let existing = cart.find(item => item.productId === productId);
  if (existing) {
    existing.qty++;
  } else {
    cart.push({ productId, qty: 1 });
  }
  localStorage.setItem('cart', JSON.stringify(cart));
  alert('Product added to cart!');
}

// Add to wishlist by product ID
function addToWishlist(productId) {
  let wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');
  if (!wishlist.includes(productId)) {
    wishlist.push(productId);
    localStorage.setItem('wishlist', JSON.stringify(wishlist));
    alert('Product added to wishlist!');
  } else {
    alert('Item already in wishlist!');
  }
}
</script>

<!-- Footer -->


<script>
  document.getElementById('year').innerText = new Date().getFullYear();
  function subscribeNewsletter() {
    const email = document.getElementById('newsletterEmail').value.trim();
    if (!email) return alert('Please enter a valid email');
    let subs = JSON.parse(localStorage.getItem('subscribers') || '[]');
    if (subs.includes(email)) return alert('You are already subscribed!');
    subs.push(email);
    localStorage.setItem('subscribers', JSON.stringify(subs));
    alert('Subscribed successfully!');
    document.getElementById('newsletterEmail').value = '';
  }
</script>

</body>
</html>
