<h1>All Products</h1>
<form method="get" action="/products" style="margin-bottom:12px;">
  <input name="q" placeholder="Search..." value="<%= q %>" />
  <input name="category" placeholder="Category" value="<%= category %>" />
  <button>Filter</button>
</form>
<div class="grid">
  <% items.forEach(p => { %>
    <div class="card">
      <a href="/product/<%= p._id %>">
        <img src="<%= (p.images && p.images[0]) || '/images/placeholder.png' %>" alt="<%= p.title %>" style="width:100%; height:200px; object-fit:cover; border-radius:8px;" />
        <div class="product-title"><%= p.title %></div>
        <div class="price">â‚¹<%= p.price %></div>
      </a>
      <form action="/cart/add" method="post">
        <input type="hidden" name="productId" value="<%= p._id %>" />
        <button style="margin-top:8px;">Add to Cart</button>
      </form>
    </div>
  <% }) %>
</div>
<div style="margin-top:16px;">
  <% for (let i=1;i<=pages;i++){ %>
    <a href="/products?q=<%= encodeURIComponent(q) %>&category=<%= encodeURIComponent(category) %>&page=<%= i %>"><button <%= i===page ? "disabled" : "" %>><%= i %></button></a>
  <% } %>
</div>
